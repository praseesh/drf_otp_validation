<h1>Make a Payment</h1>
<button id="pay-button">Pay Now</button>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
    document.getElementById('pay-button').onclick = function () {
        var options = {
            "key": "{{ RAZORPAY_KEY_ID }}",  
            "amount": "{{ amount_in_paisa }}",  
            "currency": "INR",
            "name": "Your Business Name",
            "description": "Order Payment",
            "order_id": "{{ order_id }}",  
            "handler": function (response) {
                
                fetch("{% url 'verify_payment' %}", {  
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "X-CSRFToken": "{{ csrf_token }}",
                    },
                    body: JSON.stringify(response),
                })
                .then(response => response.json())
                .then(data => alert("Payment Success!"));
            },
            "prefill": {
                "name": "{{ user.name }}",
                "email": "{{ user.email }}",
                "contact": "{{ user.contact }}"
            }
        };
        var rzp = new Razorpay(options);
        rzp.open();
    };
</script>